services:
  nonebot:
    build: .
    container_name: yiyin-nonebot
    env_file: .env.prod
    restart: unless-stopped
    networks:
      - bot-network

  napcat:
    image: mlikiowa/napcat-docker:latest
    container_name: yiyin-napcat
    environment:
      - NAPCAT_UID=0
      - NAPCAT_GID=0
    ports:
      - "6099:6099"   # NapCat WebUI
    volumes:
      - ./napcat/config:/app/napcat/config
      - ./napcat/data:/app/.config/QQ
    depends_on:
      - nonebot
    restart: unless-stopped
    networks:
      - bot-network

networks:
  bot-network:
    driver: bridge
